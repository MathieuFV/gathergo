<%= render partial: 'shared/header_card', locals: {
    title: "Availabilities",
    left_buttons: capture do %>
      <%= render 'shared/header_button',
          url: :back,
          icon_class: "fa-solid fa-arrow-left fa-lg",
          title: "Go back"
      %>
    <% end
}%>


<button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">Add availability range</button>

<div class="offcanvas offcanvas-bottom h-75" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasBottomLabel">Add your availabilities</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>

  <div data-controller="flatpickr"  class="offcanvas-body">
    <div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="modeSwitch" data-action="change->flatpickr#range">
      <label class="form-check-label" for="modeSwitch">Range Mode</label>
    </div>
    <div class="d-flex justify-content-center">
      <%= simple_form_for [@trip, @availability] do |f| %>
        <%= f.text_field :start_date, data: { target: "flatpickr.startDate" }, class: "invisible", value: @availability.start_date %>
        <%= f.hidden_field :end_date, data: { target: "flatpickr.endDate" },value: @availability.end_date %>
        <div class="d-flex justify-content-center w-100 align-items-center">
          <%= f.submit "Save availability", class: "btn btn-primary mt-4" %>
        </div>
      <% end %>
    </div>

  </div>
</div>

<% @availabilities.each do |a| %>
  <p><%= a.start_date %> - <%= a.end_date %> </p>
<% end %>


<%#= simple_form_for [@trip, @availability] do |f| %>
  <%#= f.hidden_field :start_date, data: { target: "flatpickr.startDate" } %>
  <%#= f.hidden_field :end_date, data: { target: "flatpickr.endDate" } %>
  <%#= f.submit %>
<%# end %>

<%= render "shared/tabbar" %>
